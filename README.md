# Gender Reveal App

ジェンダーリビール用のWebアプリケーションです。


* デザインテンプレートを複数用意してある。
* アカウントログインしたら1つ選べる。
* 男の子か女の子を選択する。
* 登録すると共有リンクが生成される。
* 2つ目以降も選べるようにしておく。
* 将来的には有料デザインテンプレートを用意する(選択するには都度課金する)

## 選定技術

はい、承知いたしました。提案する技術選定をマークダウン形式で記述します。

| 役割 | 技術 | 概要 |
| :--- | :--- | :--- |
| **フロントエンド・バックエンド** | **Next.js** | Reactベースのフレームワーク。Webサイトの見た目とサーバー側の処理を両方担当します。 |
| **データベース・認証** | **Supabase** | ユーザー認証（ログイン）やデータ保存を簡単に実装できるサービスです。 |
| **決済** | **Stripe** | 有料テンプレート販売のための、安全で導入しやすい決済サービスです。 |
| **ホスティング** | **Vercel** | 作成したWebサイトを公開するためのプラットフォームで、Next.jsとの相性が抜群です。 |

## 選定理由と各技術の役割
この技術スタックは、現代的なWeb開発において「高速」「高機能」「高生産性」を実現するための黄金の組み合わせの一つです。

### 1. Next.js (フロントエンド & バックエンド)
Webサイトの骨格となる部分です。ユーザーが見る画面（フロントエンド）と、裏側のデータ処理（バックエンド）をこれ一つで開発できます。

デザインテンプレートへの対応: コンポーネント指向であるため、デザインテンプレートを部品のように管理しやすく、切り替えも容易です。

共有リンクの生成: サーバーサイドの機能（API Routes）を使って、ユニークなIDを持つ共有リンクを簡単に生成できます。

開発効率: 豊富なライブラリが利用でき、開発を高速に進められます。

### 2. Supabase (データベース & ユーザー認証)
Webサイトの「脳」と「記憶」にあたる部分です。特に、ご要望の機能の根幹を担います。

アカウントログイン機能: 数行のコードで高機能なログイン・新規登録機能を実装できます。これが最大のメリットです。

データ保存: 「誰が」「どのテンプレートで」「男の子/女の子」を選んだか、といった情報を安全に保存します。

手軽さ: 本格的なデータベース（PostgreSQL）を、専門知識が少なくても簡単に利用開始できます。無料プランも充実しています。

### 3. Stripe (決済機能)
将来的な有料テンプレート販売（都度課金）を実現するために使用します。

導入の容易さ: 公式ドキュメントやライブラリが充実しており、Next.jsアプリケーションにスムーズに組み込めます。

安全性: クレジットカード情報を自社サーバーで保持する必要がなく、安全な決済システムを構築できます。

拡張性: 都度課金だけでなく、将来的にサブスクリプションなどを導入することも可能です。

### 4. Vercel (ホスティング)
完成したWebサイトをインターネット上に公開する場所です。

簡単なデプロイ: ソースコードをアップロードするだけで、自動的にビルド・公開してくれます。

Next.jsとの親和性: Next.jsを開発している会社が提供しており、パフォーマンスを最大限に引き出せます。

無料プラン: 個人開発や小規模なサービスであれば、無料プランで十分に運用を開始できます。

## 開発の具体的なステップ
環境構築:

PCにNode.jsをインストールします。

SupabaseとVercelでアカウントを作成します（無料）。

データベース設計 (Supabase):

Supabase上で、ユーザー情報を保存するテーブル (users) と、リビール情報を保存するテーブル (reveals) を作成します。

認証機能の実装:

Supabaseの認証機能を使って、ログイン・新規登録ページを作成します。

テンプレート選択・性別選択ページ作成 (Next.js):

ログイン後のメインページを作成します。

用意した複数のデザインテンプレートを一覧表示し、ユーザーが選択できるようにします。

「男の子」「女の子」の選択肢を用意します。

共有リンク生成ロジックの実装 (Next.js & Supabase):

ユーザーがテンプレートと性別を決定したら、「登録する」ボタンを設置します。

ボタンが押されたら、Next.jsのAPI機能が動作します。

ユニークなID（例: aBCdE12345）を生成します。

Supabaseのrevealsテーブルに、「ユーザーID」「テンプレートID」「性別」「ユニークID」を保存します。

https://あなたのサイト.com/reveal/aBCdE12345 のような共有リンクを生成し、ユーザーに表示します。

リビールページ作成 (Next.js):

/reveal/[id] という動的なページを作成します。

共有リンクからアクセスがあった場合、リンクのIDをもとにSupabaseからリビール情報を取得します。

取得した情報（テンプレートの種類と性別）に応じて、適切なデザインとアニメーションで結果を表示します。

有料化対応 (Stripe):

Stripeで決済機能を組み込みます。

有料テンプレート選択時にStripeの決済ページに遷移させ、支払いが完了したらリビール情報を作成できるようにします。

## データベースの設計例 (Supabase)
シンプルに考えると、以下のようなテーブル構造になります。

profiles テーブル (Supabaseの認証ユーザーと連携)
| カラム名 | 型 | 説明 |
| :--- | :--- | :--- |
| id | uuid | ユーザーID (Authのユーザーと紐づく) |
| username | text | ユーザー名 |
| created_at | timestamp | 登録日時 |

reveals テーブル
| カラム名 | 型 | 説明 |
| :--- | :--- | :--- |
| id | uuid | リビールID (自動生成) |
| user_id | uuid | 作成したユーザーのID (profiles.idと連携) |
| template_id | text | どのデザインテンプレートか (例: template_A) |
| gender | text | boy or girl |
| share_slug | text | 共有リンク用の一意の文字列 (例: aBCdE12345) |
| is_paid | boolean | 有料テンプレートか否か |
| created_at | timestamp | 作成日時 |